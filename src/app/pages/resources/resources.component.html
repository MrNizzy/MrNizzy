<h2
  class="text-6xl font-bold flex items-center gap-4 tracking-wide uppercase mb-12 rounded-2xl border border-white/5 bg-black/5 dark:bg-black/5 backdrop-blur-md shadow-[inset_0_1px_0_0_rgba(0,0,0,0.06)] dark:shadow-[inset_0_1px_0_0_rgba(255,255,255,0.06)] hover:border-black/20 transition-all duration-300 cursor-default p-6"
>
  Resources
</h2>

<!-- Resources View -->

<section
  class="flex flex-col gap-6 rounded-2xl border border-white/5 bg-black/5 dark:bg-black/5 backdrop-blur-md shadow-[inset_0_1px_0_0_rgba(0,0,0,0.06)] dark:shadow-[inset_0_1px_0_0_rgba(255,255,255,0.06)] hover:border-black/20 transition-all duration-300 cursor-default p-6"
>
  @if (resources.isLoading()) {
  <!-- Skeleton Loader: 3 items -->
  <ul class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
    @for (i of [0,1,2]; track i) {
    <li class="rounded-2xl border border-white/5 bg-black/20 p-4 animate-pulse">
      <div class="flex items-start gap-4">
        <div class="h-16 w-16 rounded-xl bg-white/10"></div>
        <div class="flex-1 space-y-2">
          <div class="h-5 w-2/3 rounded bg-white/10"></div>
          <div class="h-4 w-full rounded bg-white/10"></div>
          <div class="h-4 w-5/6 rounded bg-white/10"></div>
          <div class="mt-3 flex gap-2">
            <span class="h-6 w-12 rounded-full bg-white/10"></span>
            <span class="h-6 w-16 rounded-full bg-white/10"></span>
            <span class="h-6 w-10 rounded-full bg-white/10"></span>
          </div>
        </div>
      </div>
      <div class="mt-4 flex items-center justify-between">
        <div class="h-8 w-24 rounded-lg bg-white/10"></div>
        <div class="flex gap-4">
          <span class="h-4 w-10 rounded bg-white/10"></span>
          <span class="h-4 w-10 rounded bg-white/10"></span>
          <span class="h-4 w-10 rounded bg-white/10"></span>
        </div>
      </div>
    </li>
    }
  </ul>
  } @else if (resources.error(); as err) {
  <div
    class="text-red-400 bg-red-400/10 border border-red-400/30 rounded-xl p-4"
  >
    <p class="font-semibold">Failed to load resources</p>
    <p class="text-sm opacity-80 break-all">{{ err?.message ?? err }}</p>
  </div>
  } @else {
  <!-- Filters Bar -->
  <div class="flex flex-col lg:flex-row gap-4 items-stretch lg:items-end">
    <label class="flex-1">
      <span class="block text-xs uppercase opacity-70 mb-1">Search</span>
      <input
        type="text"
        class="w-full px-3 py-2 rounded-lg border border-white/10 bg-black/30 focus:outline-none focus:ring-2 focus:ring-white/20"
        placeholder="Search by name, description or tag..."
        [ngModel]="search()"
        (ngModelChange)="search.set($event)"
      />
    </label>
    <div class="w-full lg:w-60">
      <app-ui-select
        [label]="'Type'"
        [options]="types()"
        [value]="type()"
        (valueChange)="type.set($event)"
      />
    </div>
    <div class="w-full lg:w-60">
      <app-ui-select
        [label]="'Category'"
        [options]="categories()"
        [value]="category()"
        (valueChange)="category.set($event)"
      />
    </div>
  </div>

  <div class="flex items-center justify-between gap-4">
    <p class="text-sm opacity-70">Total: {{ resources.value().count }}</p>
    <p class="text-sm opacity-70">Showing: {{ filteredItems().length }}</p>
  </div>

  @if (filteredItems().length === 0) {
  <div class="text-base opacity-80">No resources found.</div>
  } @else {
  <ul class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
    @for (r of filteredItems(); track r.resource_id) {
    <li
      class="rounded-2xl border border-white/5 bg-black/20 hover:bg-black/30 transition-colors p-4 flex flex-col gap-4"
    >
      <button
        type="button"
        class="flex items-start gap-4 group text-left cursor-pointer"
        (click)="openResource(r)"
        aria-label="Open details for {{ r.name }}"
      >
        <img
          [src]="r.url_image"
          [alt]="r.name"
          [title]="r.name"
          class="h-16 w-16 rounded-xl object-cover border border-white/10 bg-black/30 flex-shrink-0"
          loading="lazy"
        />
        <div class="flex-1 min-w-0">
          <h4
            class="text-xl font-semibold tracking-wide group-hover:underline underline-offset-4"
          >
            {{ r.name }}
          </h4>
          <p class="text-sm opacity-80 line-clamp-3">
            {{ r.description }}
          </p>
          <div class="mt-3 flex flex-wrap gap-2">
            @for (t of r.tags; track t) {
            <span
              class="text-xs px-2 py-1 rounded-full border border-white/10 bg-black/30"
            >
              {{ t }}
            </span>
            }
          </div>
        </div>
      </button>

      <div class="flex items-center justify-between gap-3">
        <div class="flex items-center gap-2">
          @if (r.url) {
          <a
            [href]="r.url"
            target="_blank"
            rel="noopener noreferrer"
            class="text-sm px-3 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-black/40 transition-colors cursor-pointer"
            >Website</a
          >
          } @if (r.url_repository) {
          <a
            [href]="r.url_repository"
            target="_blank"
            rel="noopener noreferrer"
            class="text-sm px-3 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-black/40 transition-colors cursor-pointer"
            >Repository</a
          >
          }
        </div>
        <div class="text-xs opacity-80 flex items-center gap-4">
          <span title="Views">üëÅÔ∏è {{ r.view_count }}</span>
          <span title="Upvotes">üëç {{ r.upvotes }}</span>
          <span title="Clicks">üñ±Ô∏è {{ r.click_count }}</span>
        </div>
      </div>
    </li>
    }
  </ul>
  } @if (selectedId(); as id) {
    <app-resource-dialog [id]="id" (closed)="closeResource()" />
  }
  }
  </section>
